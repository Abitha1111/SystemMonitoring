package client;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import org.json.JSONObject; // Ensure you are using the correct JSONObject class

public class WebSocketClient {
    public static void main(String[] args) throws IOException {
        // Connect to the server at IP "192.168.11.66" on port 4999
        Socket s = new Socket("192.168.11.66", 4999);
        
        // Create PrintWriter to send data to the server
        PrintWriter pr = new PrintWriter(s.getOutputStream(), true);
        
        // Create a JSON object using org.json
        JSONObject json = new JSONObject();
       
        // Use the put method to add properties
        json.put("hostname", "suren-16923-t");
        json.put("cpu_model", "AMD Ryzen 7 PRO 5850U with Radeon Graphics");
        json.put("total_memory", "11.50 GB");
        json.put("used_memory", "8.72 GB (75.79%)");
        json.put("uptime", "79h18m51s");
        json.put("wifi", "wlp3s0    IEEE 802.11  ESSID:\"Praveenkanna\"  ");
        json.put("battery", "state:               charging, percentage:          53%");
        json.put("ssh_info", "No active SSH connections");
        json.put("active_users", 0);
        json.put("timestamp", "2024-09-30T20:30:26+05:30");

        // Send the JSON data to the server
        pr.println(json.toString());  // Convert JSON object to a string
        pr.flush();  // Ensure data is sent immediately

        // Reading response from the server
        InputStreamReader in = new InputStreamReader(s.getInputStream());
        BufferedReader bf = new BufferedReader(in);
        String str = bf.readLine();  // Read the response from the server
        System.out.println("Server: " + str);  // Print the server's response

        // Close the resources
        pr.close();
        bf.close();
        s.close();
    }
}
